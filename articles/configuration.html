<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configuration ">
    <meta name="generator" content="docfx 2.57.2.0">
    
    <link rel="shortcut icon" href="../images/log.png">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.png" alt="SimpleVersion">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="configuration">Configuration</h1>

<p>SimpleVersion reads the <code>.simpleversion.json</code> from the root of your git repository.
This file provides various configuration options.</p>
<h2 id="version">Version</h2>
<p>The <code>version</code> property allows you to specify the base version to be generated.
You  may set the property with a version string that consists of one to four
dot separated digits.</p>
<p>All of the following are accepted values:</p>
<pre><code class="lang-json">&quot;version&quot; : &quot;1&quot;
&quot;version&quot; : &quot;1.2&quot;
&quot;version&quot; : &quot;1.2.3&quot;
&quot;version&quot; : &quot;1.2.3.4&quot;
</code></pre>
<h2 id="label">Label</h2>
<p>The <code>label</code> property specifies an array of labels to be included in the version.</p>
<pre><code class="lang-json">&quot;label&quot; : []
&quot;label&quot; : [&quot;alpha1&quot;]
&quot;label&quot; : [&quot;alpha1&quot;, &quot;test&quot;]
</code></pre>
<div class="NOTE">
<h5>Note</h5>
<p>By specifying values in the label, the version will be returned as a pre-release version.
If there is a pre-release label, the height will be appended to label.</p>
</div>
<h2 id="metadata">Metadata</h2>
<p>The <code>metadata</code> property specifies an array of values to be included as metadata
in the final version.</p>
<pre><code class="lang-json">&quot;metadata&quot; : []
&quot;metadata&quot; : [&quot;demo&quot;]
&quot;metadata&quot; : [&quot;demo&quot;, &quot;sprint1&quot;]
</code></pre>
<div class="WARNING">
<h5>Warning</h5>
<p>Currently, only <code>Semver2</code> format supports <code>metadata</code>.</p>
</div>
<h2 id="offset">Offset</h2>
<p>Sometimes you may need to adjust the base value of the height. This could be
when migrating from a previous versioning pattern, if a number of commits
should be discounted, or any other reason.</p>
<p>Specify the <code>offset</code> as a numeric value to impact the base value of the height:</p>
<pre><code class="lang-json">&quot;offset&quot; : -5
&quot;offset&quot; : 4
</code></pre>
<h2 id="branches">Branches</h2>
<p>The <code>branches</code> section allows for branch specific rules and configuration to
be applied based on the branch currently being built.</p>
<h3 id="release">Release</h3>
<p><code>release</code> allows for a list of regular expressions to be defined where each
may match to the current branch being built. If the current branch does not match
any of the expressions it will have the short sha of the current commit added
to the <code>label</code> property prefixed with <code>c</code> (for commit).</p>
<pre><code class="lang-json">{
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;label&quot;: [ &quot;alpha2&quot; ],
  &quot;branches&quot;: {
    &quot;release&quot;: [
      &quot;^refs/heads/master$&quot;,
      &quot;^refs/heads/preview/.+$&quot;,
      &quot;^refs/heads/release/.+$&quot;
    ]
  }
}
</code></pre>
<p>In the above example, any branch called <em>master</em>, starting with <em>preview/</em> or
starting with <em>release/</em> will <strong>not</strong> have the short sha appended, generating a
Semver2 version of <code>0.1.0-alpha2.5</code> when there are five commits.</p>
<p>All other branches will append the short sha, generating a Semver2 version of
<code>0.1.0-alpha2.5.c903782</code> when there are five commits and the sha begins with
<em>903782</em>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Release branch configuration provides a simple way to identify what may be
publicly shipped. If the version has a label containing the sha, you probably
don't want it released.  You can enable all branches to be release branches
using the regular expression <code>.*</code>.</p>
</div>
<h3 id="overrides">Overrides</h3>
<p>Overrides allow for certain elements of the version to be reconfigured based
on the branch being built. Overrides are matched by a regular expression where
only the first match (if found) is used.</p>
<pre><code class="lang-json">{
  &quot;version&quot;: &quot;0.2.0&quot;,
  &quot;label&quot;: [ &quot;alpha1&quot; ],
  &quot;branches&quot;: {
    &quot;release&quot;: [
      &quot;^refs/heads/master$&quot;,
      &quot;^refs/heads/preview/.+$&quot;,
      &quot;^refs/heads/release/.+$&quot;
    ],
    &quot;overrides&quot;: [
      {
        &quot;match&quot;: &quot;^refs/heads/feature/.+$&quot;,
        &quot;metadata&quot;: [ &quot;{shortbranchname}&quot; ]
      },
      {
        &quot;match&quot;: &quot;^refs/heads/release/.+$&quot;,
        &quot;label&quot;: [],
        &quot;metadata&quot;: [ &quot;*&quot; ]
      }
    ]
  }
}
</code></pre>
<p>In the above example, any branch starting with <em>feature/</em> will add the branches
shortname as metadata to the generated version. E.g. <em>feature/testing</em> will
create a version of <code>0.2.0-alpha1.5.c903782+featuretesting</code> when there are five
commits and the sha begins with <em>903782</em>.</p>
<p>Additionally, any branch beginning with <em>release/</em> will strip the release label
and have the height added into the metadata.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>Overrides will allow the same commit to be built with different versions
depending on the current branch.</p>
</div>
<h4 id="override-properties">Override Properties</h4>
<p>Override configuration has access to the following properties</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>match</code></td>
<td>string</td>
<td>true</td>
<td>Branches with a canonical branch name matching this regular expression will be overridden</td>
</tr>
<tr>
<td><code>label</code></td>
<td>string array</td>
<td>false</td>
<td>Overrides <code>label</code> from the base configuration</td>
</tr>
<tr>
<td><code>prefixlabel</code></td>
<td>string array</td>
<td>false</td>
<td>Prefixes the base configuration <code>label</code> with the given values</td>
</tr>
<tr>
<td><code>postfixlabel</code></td>
<td>string array</td>
<td>false</td>
<td>Postfixes the base configuration <code>label</code> with the given values</td>
</tr>
<tr>
<td><code>insertlabel</code></td>
<td>int/string dictionary</td>
<td>false</td>
<td>Inserts the given values into the base <code>label</code> at the index specified</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>string array</td>
<td>false</td>
<td>Overrides <code>metadata</code> from the base configuration</td>
</tr>
<tr>
<td><code>prefixmetadata</code></td>
<td>string array</td>
<td>false</td>
<td>Prefixes the base configuration <code>metadata</code> with the given values</td>
</tr>
<tr>
<td><code>postfixmetadata</code></td>
<td>string array</td>
<td>false</td>
<td>Postfixes the base configuration <code>metadata</code> with the given values</td>
</tr>
<tr>
<td><code>insertmetadata</code></td>
<td>int/string dictionary</td>
<td>false</td>
<td>Inserts the given values into the base <code>metadata</code> at the index specified</td>
</tr>
</tbody>
</table>
<h2 id="replacement-tokens">Replacement Tokens</h2>
<p>SimpleVersion allows specific <em>tokens</em> to be used in some properties to allow
substitution of values during invocation.  The following tokens may be used:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Token</th>
<th>Where</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Height</td>
<td><code>*</code></td>
<td><code>version</code>, <code>label</code>, <code>metadata</code></td>
<td>Inserts the calculated height</td>
</tr>
<tr>
<td>Branch Name</td>
<td><code>{branchname}</code></td>
<td><code>label</code>, <code>metadata</code></td>
<td>Inserts the canonical branch name, stripped of non-alphanumeric characters</td>
</tr>
<tr>
<td>Short Branch Name</td>
<td><code>{shortbranchname}</code></td>
<td><code>label</code>, <code>metadata</code></td>
<td>Inserts the friendly branch name, stripped of non-alphanumeric characters</td>
</tr>
<tr>
<td>Branch Name Suffix</td>
<td><code>{branchnamesuffix}</code></td>
<td><code>label</code>, <code>metadata</code></td>
<td>Inserts the last segment of the canonical name of a branch</td>
</tr>
<tr>
<td>Short Sha</td>
<td><code>{shortsha}</code></td>
<td><code>label</code>, <code>metadata</code></td>
<td>Inserts the first seven characters of the commit sha, prefixed with <code>c</code> (for commit)</td>
</tr>
<tr>
<td>Pull-Request Id</td>
<td><code>{pr}</code></td>
<td><code>label</code>, <code>metadata</code></td>
<td>Inserts the id of the pull-request (or 0 by default)</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Kieranties/SimpleVersion/blob/master/src/SimpleVersion.Docs/site/articles/configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
